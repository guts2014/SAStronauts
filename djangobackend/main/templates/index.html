<!DOCTYPE html>
<html>
  <head>
    <script src="https://maps.googleapis.com/maps/api/js"></script>
    <style>
        #searchdiv {
            position: absolute;
            top: 6px;
            left: 45px;
        }
        #searchbox {
            
            width: 270px;
            height: 30px;
            font-size: 22px;
            -webkit-border-radius: 0px;
            -moz-border-radius: 0px;
            border-radius: 0px;
        }
        #map_canvas {
          display: block;
          position: absolute;
          top: 0px;
          width: 99%;
          bottom: 0px;
        }
    </style>
    <script>
        //setting up the google map
        var map;
        var currentmarkers = [];
        
        function initialize() {
            var mapCanvas = document.getElementById('map_canvas');
            var mapOptions = {
                center: new google.maps.LatLng(0, 0),
                zoom: 3,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                zoomControl: false,
                panControl: false,
            }
            map = new google.maps.Map(mapCanvas, mapOptions)
        }
        google.maps.event.addDomListener(window, 'load', initialize);

//an example on how to iterate through the json daa loading it in to html
//var json = {'wikipedia': {'article': {'relevant_links': [{'url':'url1...'}, {'url': 'url2...'}]}}};

//$('#contents').append('<ul>');
//for (link in json['wikipedia'][article][relevant_links]) {
//    $('#contents').append('<li>' + link[url] + '</li>');
//}
    
    </script>
  </head>
  <body>
    <div id="map_canvas"></div>
    <div id="searchdiv">
        <input type="text" value="test" placeholder="Search" id="search-query"></input>
        <button type="button" id="search-button">Go</button>
    </div>
    <div id='contents'></div>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script>
        //some super-useful helper functions
        function addmarker(id, lat, long, otherdata){
            var m = new google.maps.Marker({position: new google.maps.LatLng(lat, long)});
            m.id = id; //this is a total hax because javascript is interpreted, but it works.
            m.otherdata = otherdata;

            //add the marker to the map here
        }
        //All callback functions for get requests
        function SearchGetCallback(data){
            alert("data was: "+data);         
        }

        function makeSearchGetRequest(){
            var pageaddress = "/api/query/?q=" + $("#search-query").val().replace(" ", "+");
            console.log("requesting:", pageaddress)
            //using jquery for a get request
            $.get(
                pageaddress,
                {},//empty parameters
                SearchGetCallback                    
            );      
        }

        $(document).ready(function() {
            //the event listeners for the search elements
            $('#search-button').on('click', function() {
                makeSearchGetRequest();
                
            });

            $(document).on('keydown', function(e) {
                if (e.keyCode === 13) {
                    makeSearchGetRequest();
                }

            });

        //the event listeners for clicking map items
        addmarker(123, 30, 30, {data: "hi"})
        
        });
</script>
  </body>
</html>
